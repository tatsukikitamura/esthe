<div class="edit-profile-container">
  <h1 class="page-title">プロフィール編集</h1>
  
  <%= form_with model: current_user, local: true do |f| %>
    <% if current_user.errors.any? %>
      <div class="error-messages">
        <h3><%= pluralize(current_user.errors.count, "error") %> prohibited this user from being saved:</h3>
        <ul>
          <% current_user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :name, "名前", class: "form-label" %>
      <%= f.text_field :name, class: "form-control", placeholder: "お名前を入力してください" %>
    </div>

    <div class="form-group">
      <%= f.label :email, "メールアドレス", class: "form-label" %>
      <%= f.email_field :email, class: "form-control", placeholder: "メールアドレスを入力してください" %>
    </div>

    <div class="form-group">
      <%= f.label :profile_image, "プロフィール画像", class: "form-label" %>
      <%= f.file_field :profile_image, class: "form-control", accept: "image/*" %>
      <% if current_user.profile_image.attached? %>
        <div class="current-image">
          <p class="current-image-label">現在の画像:</p>
          <%= image_tag current_user.profile_image, alt: current_user.name, class: "current-profile-image" %>
        </div>
      <% end %>
    </div>

    <div class="form-actions">
      <%= f.submit "更新する", class: "btn btn-primary" %>
      <%= link_to "キャンセル", users_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
